scenarios:
  - name: Send_flowers_to_friends
    description: Send flowers to friends
    steps:
      - click: [490, 600] # Skip Hero Upgrade Pack popup window
      - click: [60, 680] # Friends icon
      - click: [715, 670] # Send All
      - click: [635, 535] # Claim
      - click: [965, 670] # Receive All
      - click: [640, 505] # Claim
      - click: [60, 50] # return to the main  game screen
  
  - name: Daily_rewards
    description: Collect daily rewards
    steps:
      - click: [150, 685] # envelop icon
      - click: [437, 657] # confirm that we are on System tab
      - if:
          condition: "compare_with_text_easyocr(293,563,154,38,'Claim') or compare_with_image(293,563,154,38,'Claim_all.png',0.85)"
          then:
            - click: [369,584] # Claim All
            - if:
                condition: "compare_with_text_easyocr(587,462,108,40,'Claim') or compare_with_image(587,462,108,40,'daily_reward_claim.png',0.85)" # one line
                then:
                  - log: "Claiming daily reward - 1 line"
                  - click: [640,485] # Claim
                else:
                  - if:
                      condition: "compare_with_text_easyocr(590,533,100,39,'Claim') or compare_with_image(590,533,100,39,'daily_reward_claim2.png',0.85)" # two lines
                      then:
                        - log: "Claiming daily reward - 2 lines"
                        - click: [642,554] # Claim
                      else:
                        - if:
                            condition: "compare_with_text_easyocr(592,569,108,40,'Claim') or compare_with_image(592,569,108,40,'daily_reward_claim3.png',0.85)" # three lines
                            then:
                              - log: "Claiming daily reward - 3 lines"
                              - click: [639,590] # Claim

      - click: [60, 50] # return to the main  game screen

  - name: Campaign_farming
    description: Campaign farming
    steps:
      - if:
          condition: "compare_with_text_easyocr(326,547,85,24,'Campaign') or compare_with_text(326,547,85,24,'Campaign')"
          then:
            - log: "Entering the Campaign"
            - click: [267,496] # Enter to Campaign
            - delay: 2
            - log: "Claim button"
            - click: [1163,680] # Claim button
            - delay: 2
            - if:
                condition: "compare_with_text_easyocr(460,641,358,38,'Please')" # If a new level is reached
                then:
                  - log: "New level reached"
                  - click: [683,665] # Click Claim button
                  - delay: 2
                  - if:
                      condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  
                      then:
                        - click: [510,466] # Tap to continue
                        - click: [690,679] # Confirm button
                      else:
                        - click: [690,679] # Confirm button
                else:
                  - click: [690,679] # Confirm button

            - click: [834,679] # Accelerate for free
            - log: "Accelerate for free"
            - delay: 5
            - if:
                condition: "compare_with_text_easyocr(460,641,358,38,'Please')" # If a new level is reached
                then:
                  - click: [510,466] # Tap to continue
                  - click: [690,679] # Confirm button
                else:
                  - click: [690,679] # Confirm button
            
            - log: "Accelerate for free or 50 gems"
            - click: [834,679] # Accelerate for ticket or 50 gems
            - delay: 5
            - if:
                condition: "compare_with_text_easyocr(460,641,358,38,'Please')" # If a new level is reached
                then:
                  - log: "New level reached"
                  - click: [510,466] # Tap to continue
                  - click: [690,679] # Confirm button
                else:
                  - click: [690,679] # Confirm button
            - click: [60, 50] # return to the main  game screen
  
  - name: Gene_Bank
    description: Gene Bank farming
    steps:
      - if:
          condition: "compare_with_text_easyocr(798,554,88,26,'Gene') or compare_with_text(798,554,88,26,'Gene')"
          then:
            - click: [750,510] # Enter to Gene Bank
            - delay: 1
            - if:
                condition: "compare_with_text_easyocr(216,481,88,39,'Free') or compare_with_image(219,483,85,38,'Free_Ordinary_Clone.png',0.85)" # If Free Ordinary Clone button is available
                then:
                  - click: [268,503] # Click Free button
                  - delay: 2
                  - if:
                      condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  # if capacity is full
                      then:
                        - send_email: "The Gene Bank farming failed for the {{ instance_name }} instance." # send an email if capacity is full
                        - click: [510,466] # Click Cancel
                        - click: [60, 50] # return to the Game main screen
                      else:
                        - click: [60, 50] # return to the Gene Bank screen
                        - if:
                            condition: "compare_with_text_easyocr(574,566,140,37,'Free')" # If Free Advanced Clone button is available
                            then:
                              - click: [641,584] # Click Free button
                              - delay: 2
                              - if:
                                  condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  # if capacity is full
                                  then:
                                    - send_email: "The Gene Bank farming failed for the {{ instance_name }} instance." # send an email if capacity is full
                                    - click: [510,466] # Click Cancel
                                    - click: [60, 50] # return to the Game main screen
                                  else:
                                    - log: "No Free Ordinary Clone button, but Free Advanced Clone button is available"
                                    - click: [60, 50] # return to the Gene Bank screen
                                    - delay: 1
                                    - log: "Second click on back arrows"
                                    - click: [60, 50] # return to the Game main screen
                            else:
                              - click: [60, 50] # return to the Game main screen
                else:
                  - if:
                      condition: "compare_with_text_easyocr(574,566,140,37,'Free')" # If Free Advanced Clone button is available
                      then:
                        - log: "Free Advanced Clone button is available"
                        - click: [641,584] # Click Free button
                        - delay: 2
                        - if:
                            condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  # if capacity is full
                            then:
                              - send_email: "The Gene Bank farming failed for the {{ instance_name }} instance." # send an email if capacity is full
                              - click: [510,466] # Click Cancel
                              - click: [60, 50] # return to the Game main screen
                            else:
                              
                              - click: [60, 50] # return to the Gene Bank screen
                              - delay: 2
                              - log: "Second click on back arrows"
                              - click: [60, 50] # return to the Game main screen
                      else:
                        - log: "if not advance clone is available for free"
                        - click: [60, 50] # return to the Game main screen

  - name: Guild_activity
    description: Guild activity 
    steps:
      - if:
          condition: "compare_with_text_easyocr(1146,671,97,43, 'Guild') or compare_with_image(1146,671,97,43,'Guild.png',0.85)" # Check if Guild icon is available
          then:
            - click: [1195,637] # Click on Guild icon
            - delay: 2
            - if:
                condition: compare_with_image(915,521,79,29,'Boss_reward_claim.png',0.85) # Check if Boss  reward is available
                then:
                  - click: [955,536] # Claim Boss reward
                  - delay: 2
                  - click: [638, 481] # One more claim button
                  - click: [60,50] # exit from the Boss reward screen

            - if:
                condition: "compare_with_text_easyocr(757,527,78,34,'Claim')" # Claim_playoff_round_reward -- change to image
                then:
                  - click: [792, 546] # click Claim button
                  - delay: 1
                  - click: [636,482] # click another Claim button
                  - click: [60, 50] # exit from the playoff round reward screen
            
            - if:
                condition: compare_with_image(918,523,73,27,'champion_cup_reward.png',0.85) # Claim championship reward
                then:
                  - click: [950, 534] # Claim Championship reward
                  - delay: 2
                  - click: [646, 486] # One more claim button
                  - click: [60,50] # exit from the championship reward screen

            - click: [294,624] # click sign in
            - delay: 2
            - click: [640, 488] # click Claim
            - delay: 1
            - click: [146,484] # Go to Boss war screen
            - delay: 1
            - if:
                condition: "compare_with_text_easyocr(905,398,139,36,'Challenge')" # In Challenge button is available
                then:
                  - click: [973,416] # click Claim button
                  - delay: 2
                  - click: [637,644] # click Start button
                  - delay: 5
                  - set: { click_attempts: 0 }
                  - while:
                      condition: "not compare_with_text_easyocr(588,569,106,42,'Claim') and not compare_with_image(588,569,106,42,'boss_war_reward_claim.png',0.85) and click_attempts < 10" 
                      do:
                        - log: "Claim button not visible. Attempt #{{ click_attempts + 1 }}"
                        - click: [228, 54] # click on fight finish button until Claim button appears
                        - delay: 2
                        - increment: click_attempts
                  - if:
                      condition: "compare_with_text_easyocr(588,569,106,42,'Claim') or compare_with_image(588,569,106,42,'boss_war_reward_claim.png',0.85)"  # If Claim button is available
                      then:
                        - click: [643,594] # click Claim button
                        - delay: 2
                        - click: [1131,509] # click Confirm button
                        - click: [60, 50] # unfocus from the ship
                        - click: [60, 50] # return to the guild screen
                else:
                  - click: [60, 50] # 
                  - click: [60, 50] # return to the guild screen
            - click: [60, 50] # return to the Game main screen
          else:
            - send_email: "Guild activity failed for the {{ instance_name }} instance." # send an email if Guild icon is not available
  
  - name: Bonus_rewards
    description: Bonus rewards collection
    steps:
      - click: [70, 259] # Bonus icon
      - click: [90, 296] # Go to daily tasks

  - name: Supply_Depot
    description: Supply Depot farming
    steps:
      - if:
          condition: "compare_with_text_easyocr(142,301,111,26,'Supply')"
          then:
            - click: [194,263] # Enter to Supply Depot
            - if:
                condition: "compare_with_text_easyocr(882,637,215,37,'Free')" # If Free refresh button is available
                then:
                  - click: [968,656] # Click Free Refresh button
                  - if:
                      condition: "compare_with_any_image(427,207,105,105, ['purple.png', 'purple_chest.png'], 0.9)"  # Check item. Row 1 from 1. Column 1 from left 
                      then:
                        - click: [641,584] # Buy if resource is needed
                        - delay: 2
                        
                  
            
            - click: [60, 50] # return to the main  game sceen

  - name: test_easyocr
    description: Test new OCR library easyocr
    steps:
      - if:
          condition: "compare_with_text_easyocr(1146,671,97,43, 'Guild')"
          then:
            - log: "Successfully found 'Claim' using EasyOCR."
            - click: [750,510] # 
      - if:
          # Use the new feature matching with your tuned match count
          condition: "compare_with_features(588, 569, 106, 42, 'button_claim_orb.png', 12)"
          then:
            - log: "Claim button found using feature matching!"
            - click: [640, 590]
      - if:
          # Check if the reward is a gold chest OR a purple chest, requiring at least 15 feature matches.
          # Note the surrounding double quotes, which are required for the list syntax.
          condition: "compare_with_any_image(300, 400, 50, 50, ['gold_chest.png', 'purple_chest.png'], 15)"
          then:
            - log: "Found a high-value chest using feature matching!"
            - click: [325, 425]