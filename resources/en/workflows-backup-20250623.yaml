scenarios:
  - name: Send_flowers_to_friends
    description: Send flowers to friends
    steps:
      - click: [490, 600] # Skip Hero Upgrade Pack popup window
      - click: [60, 680] # Friends icon
      - click: [715, 670] # Send All
      - click: [635, 535] # Claim
      - click: [965, 670] # Receive All
      - click: [640, 505] # Claim
      - click: [60, 50] # return to the main  game screen
  
  - name: Daily_rewards
    description: Collect daily rewards
    steps:
      - click: [150, 685] # envelop icon
      - click: [437, 657] # confirm that we are on System tab
      - if:
          condition: "compare_with_text_easyocr(293,563,154,38,'Claim') or compare_with_image(293,563,154,38,'Claim_all.png',0.85)"
          then:
            - click: [369,584] # Claim All
            - if:
                condition: "compare_with_text_easyocr(587,462,108,40,'Claim') or compare_with_image(587,462,108,40,'daily_reward_claim.png',0.85)" # one line
                then:
                  - log: "Claiming daily reward - 1 line"
                  - click: [640,485] # Claim
                else:
                  - if:
                      condition: "compare_with_text_easyocr(590,533,100,39,'Claim') or compare_with_image(590,533,100,39,'daily_reward_claim2.png',0.85)" # two lines
                      then:
                        - log: "Claiming daily reward - 2 lines"
                        - click: [642,554] # Claim
                      else:
                        - if:
                            condition: "compare_with_text_easyocr(592,569,108,40,'Claim') or compare_with_image(592,569,108,40,'daily_reward_claim3.png',0.85)" # three lines
                            then:
                              - log: "Claiming daily reward - 3 lines"
                              - click: [639,590] # Claim

      - click: [60, 50] # return to the main  game screen

  - name: Campaign_farming
    description: Campaign farming
    steps:
      - if:
          condition: "compare_with_text_easyocr(327,547,83,25,'Campaign') or compare_with_image(327,547,83,25,'Campaign.png',0.85)" # Check if Campaign icon is available
          then:
            - log: "Entering the Campaign"
            - click: [267,496] # Enter to Campaign
            - delay: 2
            - log: "Claim button"
            - click: [1163,680] # Claim button
            - delay: 2
            - if:
                condition: "compare_with_text_easyocr(460,641,358,38,'Please')" # If a new level is reached
                then:
                  - log: "New level reached"
                  - click: [683,665] # Click Claim button
                  - delay: 2
                  - if:
                      condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  
                      then:
                        - click: [510,466] # Tap to continue
                        - click: [690,679] # Confirm button
                      else:
                        - click: [690,679] # Confirm button
                else:
                  - click: [690,679] # Confirm button

            - click: [834,679] # Accelerate for free
            - log: "Accelerate for free"
            - delay: 5
            - if:
                condition: "compare_with_text_easyocr(460,641,358,38,'Please')" # If a new level is reached
                then:
                  - click: [510,466] # Tap to continue
                  - click: [690,679] # Confirm button
                else:
                  - click: [690,679] # Confirm button
            
            - log: "Accelerate for free or 50 gems"
            - click: [834,679] # Accelerate for ticket or 50 gems
            - delay: 5
            - if:
                condition: "compare_with_text_easyocr(460,641,358,38,'Please')" # If a new level is reached
                then:
                  - log: "New level reached"
                  - click: [510,466] # Tap to continue
                  - click: [690,679] # Confirm button
                else:
                  - click: [690,679] # Confirm button
            - click: [60, 50] # return to the main  game screen
  
  - name: Gene_Bank
    description: Gene Bank farming
    steps:
      - if:
          condition: "compare_with_text_easyocr(798,554,88,26,'Gene') or compare_with_image(798,554,88,26,'GeneBank.png',0.85)"
          then:
            - click: [750,510] # Enter to Gene Bank
            - delay: 1
            - if:
                condition: "compare_with_text_easyocr(216,481,88,39,'Free') or compare_with_image(219,483,85,38,'Free_Ordinary_Clone.png',0.85)" # If Free Ordinary Clone button is available
                then:
                  - click: [268,503] # Click Free button
                  - delay: 2
                  - if:
                      condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  # if capacity is full
                      then:
                        - send_email: "The Gene Bank farming failed for the {{ instance_name }} instance." # send an email if capacity is full
                        - click: [510,466] # Click Cancel
                        - click: [60, 50] # return to the Game main screen
                      else:
                        - click: [60, 50] # return to the Gene Bank screen
                        - if:
                            condition: "compare_with_text_easyocr(574,566,140,37,'Free')" # If Free Advanced Clone button is available
                            then:
                              - click: [641,584] # Click Free button
                              - delay: 2
                              - if:
                                  condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  # if capacity is full
                                  then:
                                    - send_email: "The Gene Bank farming failed for the {{ instance_name }} instance. capacity is full" # send an email if capacity is full
                                    - click: [510,466] # Click Cancel
                                    - click: [60, 50] # return to the Game main screen
                                  else:
                                    - log: "No Free Ordinary Clone button, but Free Advanced Clone button is available"
                                    - click: [60, 50] # return to the Gene Bank screen
                                    - delay: 1
                                    - log: "Second click on back arrows"
                                    - click: [60, 50] # return to the Game main screen
                            else:
                              - click: [60, 50] # return to the Game main screen
                else:
                  - if:
                      condition: "compare_with_text_easyocr(574,566,140,37,'Free')" # If Free Advanced Clone button is available
                      then:
                        - log: "Free Advanced Clone button is available"
                        - click: [641,584] # Click Free button
                        - delay: 2
                        - if:
                            condition: "compare_with_text_easyocr(707,445,131,36,'Confirm')"  # if capacity is full
                            then:
                              - send_email: "The Gene Bank farming failed for the {{ instance_name }} instance. capacity is full" # send an email if capacity is full
                              - click: [510,466] # Click Cancel
                              - click: [60, 50] # return to the Game main screen
                            else:
                              
                              - click: [60, 50] # return to the Gene Bank screen
                              - delay: 2
                              - log: "Second click on back arrows"
                              - click: [60, 50] # return to the Game main screen
                      else:
                        - log: "if not advance clone is available for free"
                        - click: [60, 50] # return to the Game main screen
          else:
            - log: "Gene Bank icon is not available"
            - send_email: "Gene Bank farming failed for the {{ instance_name }} instance." # send an email if Gene Bank icon is not available

  - name: Guild_activity
    description: Guild activity 
    steps:
      - if:
          condition: "compare_with_text_easyocr(1146,671,97,43, 'Guild') or compare_with_image(1146,671,97,43,'Guild.png',0.85)" # Check if Guild icon is available
          then:
            - click: [1195,637] # Click on Guild icon
            - delay: 2
            - log : "Check if Boss  reward is available"
            - if:
                condition: compare_with_image(915,521,79,29,'Boss_reward_claim.png',0.85) # Check if Boss  reward is available
                then:
                  - click: [955,536] # Claim Boss reward
                  - delay: 2
                  - click: [638, 481] # One more claim button
                  - click: [60,50] # exit from the Boss reward screen

            - log : "Check if Claim_playoff_round_reward is available"
            - if:
                condition: "compare_with_text_easyocr(757,527,78,34,'Claim')" # Claim_playoff_round_reward -- change to image
                then:
                  - click: [792, 546] # click Claim button
                  - delay: 1
                  - click: [636,482] # click another Claim button
                  - click: [60, 50] # exit from the playoff round reward screen
            
            - log : "Check if championship reward is available"
            - if:
                condition: compare_with_image(918,523,73,27,'champion_cup_reward.png',0.85) # Claim championship reward
                then:
                  - click: [950, 534] # Claim Championship reward
                  - delay: 2
                  - click: [646, 486] # One more claim button
                  - click: [60,50] # exit from the championship reward screen
            
            - log : "click sign in"
            - click: [294,624] # click sign in
            - delay: 2
            - click: [640, 488] # click Claim
            - if :
                condition: "compare_with_text_easyocr(474,553,96,40,'Send') or compare_with_image(474,553,96,40,'Guild_Send.png',0.85)" # Check if Sign-in button has already been clicked
                then:
                  - log: "Sign-in button has already been clicked"                    
                  - click: [60, 50] # return to the guild screen
            - delay: 1
            - log : "Go to Boss war screen"
            - click: [146,484] # Go to Boss war screen
            - delay: 1
            - log : "Check if  Challenge button  available"
            - if:
                condition: "compare_with_text_easyocr(905,398,139,36,'Challenge')" # Check if  Challenge button  available
                then:
                  - click: [973,416] # click Claim button
                  - delay: 2
                  - click: [637,644] # click Start button
                  - delay: 5
                  - set: { click_attempts: 0 }
                  - while:
                      condition: "not compare_with_text_easyocr(588,569,106,42,'Claim') and not compare_with_image(588,569,106,42,'boss_war_reward_claim.png',0.85) and click_attempts < 10" 
                      do:
                        - log: "Claim button not visible. Attempt #{{ click_attempts + 1 }}"
                        - click: [228, 54] # click on fight finish button until Claim button appears
                        - delay: 2
                        - increment: click_attempts
                  - if:
                      condition: "compare_with_text_easyocr(588,569,106,42,'Claim') or compare_with_image(588,569,106,42,'boss_war_reward_claim.png',0.85)"  # If Claim button is available
                      then:
                        - click: [643,594] # click Claim button
                        - delay: 2
                        - click: [1131,509] # click Confirm button
                        - click: [60, 50] # unfocus from the ship
                        - click: [60, 50] # return to the guild screen
                else:
                  - click: [60, 50] # 
                  - click: [60, 50] # return to the guild screen
            - click: [60, 50] # return to the Game main screen
          else:
            - send_email: "Guild activity failed for the {{ instance_name }} instance." # send an email if Guild icon is not available
  
  - name: Airship_farming
    description: Airship farming
    steps:
      #- scroll: [996,352, right,400] # Scroll right to make sure Airship icon is visible
      - scroll: [996,352, left,400] # Scroll right to make sure Airship icon is visible
      - if:
          condition: "compare_with_text_easyocr(498,254,116,41,'air') or compare_with_text_easyocr(570,256,101,36,'air')" # Check if Guild icon is available - with ad sidebar
          then:
            - click: [549, 186] # Click on Airship  icon without ad sidebar
            - click: [610, 198] # Click on Airship  icon with  ad sidebar
            - delay: 1
            - log : "Left slot farming"
            - click: [236, 376] # Click on left slot
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - log : "check last position"
            - if:
                condition: compare_with_text_easyocr(905,584,92,32,'Sweep') # Check if Sweep button is available at the last position
                then:
                  - click: [948,601] # Click Sweep button
                  - delay: 4
                  - click: [639,485] # Click Claim button
                  - click: [948,601] # Click Sweep button
                  - delay: 4
                  - click: [639,485] # Click Claim button
                  - click: [60,50] # exit from the Airship reward screen
                else:
                  - log : "check last-1 position"
                  - if:
                      condition: compare_with_text_easyocr(905,489,93,32,'Sweep') # Check if Sweep button is available at the last-1 position
                      then:
                        - click: [948, 504] # Click Sweep button
                        - delay: 4
                        - click: [639,485] # Click Claim button
                        - click: [948, 504] # Click Sweep button
                        - delay: 4
                        - click: [639,485] # Click Claim button
                        - click: [60,50] # exit from the Airship reward screen
                      else:
                        - log : "check last-2 position"
                        - if:
                            condition: compare_with_text_easyocr(905,394,93,32,'Sweep') # Check if Sweep button is available at the last-2 position
                            then:
                              - click: [948, 409] # Click Sweep button
                              - delay: 4
                              - click: [639,485] # Click Claim button
                              - click: [948, 409] # Click Sweep button
                              - delay: 4
                              - click: [639,485] # Click Claim button
                              - click: [60,50] # exit from the Airship reward screen
                            else:
                              - log : "check last-3 position"
                              - if:
                                  condition: compare_with_text_easyocr(905,394,93,32,'Sweep') # Check if Sweep button is available at the last-3 position
                                  then:
                                    - click: [946,408] # Click Sweep button
                                    - delay: 4
                                    - click: [639,485] # Click Claim button
                                    - click: [946,408] # Click Sweep button
                                    - delay: 4
                                    - click: [639,485] # Click Claim button
                                    - click: [60,50] # exit from the Airship reward screen
                                  else:
                                    - if:
                                        condition: compare_with_text_easyocr(905,204,93,32,'Sweep') # Check if Sweep button is available at the last-4 position
                                        then:
                                          - click: [948,218] # Click Sweep button
                                          - delay: 4
                                          - click: [639,485] # Click Claim button
                                          - click: [948,218] # Click Sweep button
                                          - delay: 4
                                          - click: [639,485] # Click Claim button
                                          - click: [60,50] # exit from the Airship reward screen
                                        else:
                                          - log : "No Sweep button found in Airship farming"
            - log : "middle slot farming"
            - click: [636,373] # Click on middle  slot
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - log : "check last position"
            - if:
                condition: compare_with_text_easyocr(905,584,92,32,'Sweep') # Check if Sweep button is available at the last position
                then:
                  - click: [948,601] # Click Sweep button
                  - delay: 4
                  - click: [639,485] # Click Claim button
                  - click: [948,601] # Click Sweep button
                  - delay: 4
                  - click: [639,485] # Click Claim button
                  - click: [60,50] # exit from the Airship reward screen
                else:
                  - log : "check last-1 position"
                  - if:
                      condition: compare_with_text_easyocr(905,489,93,32,'Sweep') # Check if Sweep button is available at the last-1 position
                      then:
                        - click: [948, 504] # Click Sweep button
                        - delay: 4
                        - click: [639,485] # Click Claim button
                        - click: [948, 504] # Click Sweep button
                        - delay: 4
                        - click: [639,485] # Click Claim button
                        - click: [60,50] # exit from the Airship reward screen
                      else:
                        - log : "check last-2 position"
                        - if:
                            condition: compare_with_text_easyocr(905,394,93,32,'Sweep') # Check if Sweep button is available at the last-2 position
                            then:
                              - click: [948, 409] # Click Sweep button
                              - delay: 4
                              - click: [639,485] # Click Claim button
                              - click: [948, 409] # Click Sweep button
                              - delay: 4
                              - click: [639,485] # Click Claim button
                              - click: [60,50] # exit from the Airship reward screen
                            else:
                              - log : "check last-3 position"
                              - if:
                                  condition: compare_with_text_easyocr(905,394,93,32,'Sweep') # Check if Sweep button is available at the last-3 position
                                  then:
                                    - click: [946,408] # Click Sweep button
                                    - delay: 4
                                    - click: [639,485] # Click Claim button
                                    - click: [946,408] # Click Sweep button
                                    - delay: 4
                                    - click: [639,485] # Click Claim button
                                    - click: [60,50] # exit from the Airship reward screen
                                  else:
                                    - if:
                                        condition: compare_with_text_easyocr(905,204,93,32,'Sweep') # Check if Sweep button is available at the last-4 position
                                        then:
                                          - click: [948,218] # Click Sweep button
                                          - delay: 4
                                          - click: [639,485] # Click Claim button
                                          - click: [948,218] # Click Sweep button
                                          - delay: 4
                                          - click: [639,485] # Click Claim button
                                          - click: [60,50] # exit from the Airship reward screen
                                        else:
                                          - log : "No Sweep button found in Airship farming"          
            - log : "right slot farming"
            - click: [1050,352] # Click on right  slot
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - scroll: [624,582, up,400] # Scroll up
            - log : "check last position"
            - if:
                condition: compare_with_text_easyocr(905,584,92,32,'Sweep') # Check if Sweep button is available at the last position
                then:
                  - click: [948,601] # Click Sweep button
                  - delay: 4
                  - click: [639,485] # Click Claim button
                  - click: [948,601] # Click Sweep button
                  - delay: 4
                  - click: [639,485] # Click Claim button
                  - click: [60,50] # exit from the Airship reward screen
                else:
                  - log : "check last-1 position"
                  - if:
                      condition: compare_with_text_easyocr(905,489,93,32,'Sweep') # Check if Sweep button is available at the last-1 position
                      then:
                        - click: [948, 504] # Click Sweep button
                        - delay: 4
                        - click: [639,485] # Click Claim button
                        - click: [948, 504] # Click Sweep button
                        - delay: 4
                        - click: [639,485] # Click Claim button
                        - click: [60,50] # exit from the Airship reward screen
                      else:
                        - log : "check last-2 position"
                        - if:
                            condition: compare_with_text_easyocr(905,394,93,32,'Sweep') # Check if Sweep button is available at the last-2 position
                            then:
                              - click: [948, 409] # Click Sweep button
                              - delay: 4
                              - click: [639,485] # Click Claim button
                              - click: [948, 409] # Click Sweep button
                              - delay: 4
                              - click: [639,485] # Click Claim button
                              - click: [60,50] # exit from the Airship reward screen
                            else:
                              - log : "check last-3 position"
                              - if:
                                  condition: compare_with_text_easyocr(905,394,93,32,'Sweep') # Check if Sweep button is available at the last-3 position
                                  then:
                                    - click: [946,408] # Click Sweep button
                                    - delay: 4
                                    - click: [639,485] # Click Claim button
                                    - click: [946,408] # Click Sweep button
                                    - delay: 4
                                    - click: [639,485] # Click Claim button
                                    - click: [60,50] # exit from the Airship reward screen
                                  else:
                                    - if:
                                        condition: compare_with_text_easyocr(905,204,93,32,'Sweep') # Check if Sweep button is available at the last-4 position
                                        then:
                                          - click: [948,218] # Click Sweep button
                                          - delay: 4
                                          - click: [639,485] # Click Claim button
                                          - click: [948,218] # Click Sweep button
                                          - delay: 4
                                          - click: [639,485] # Click Claim button
                                          - click: [60,50] # exit from the Airship reward screen
                                        else:
                                          - log : "No Sweep button found in Airship farming"  
            - log : "return to the Game main screen"
            - click: [60, 50] # return to the Game main screen
          else:
            - send_email: "Airship farming failed for the {{ instance_name }} instance. No Airship icon is available" # send an email if Airship icon is not available
      - log : "End of Airship farming"
      #- click: [60,50] # exit from the Airship reward screen

  - name: Dangeon_farming
    description: Dangeon farming
    steps:
      #- scroll: [996,352, left,400] # Scroll left to make sure Dangeon icon is visible
      - scroll: [996,352, left,400] # Scroll left to make sure Dangeon icon is visible
      - click: [975,429] # enter to Dangeon
      - click: [926,674] # Click Sweep button
      - click: [765,465] # Click Confirm button
      - delay: 1
      - click: [638,587] # Click Claim button
      - click: [414,38] # Switch to Advanced Dangeon
      - click: [1198,659] # Initiate reward collection
      - delay: 3
      - if:
          condition: "compare_with_text_easyocr(588,459,104,45, 'Claim')" # Check if Claim button is available
          then:
            - click: [638,481] # Click on Claim button
          else:
            - log: "Claim button not found in Dangeon farming"
            #- click: [60, 50] # return to the main  game screen
      - click: [60, 50] # exit main game screen
  
  - name: Arena_farming
    description: Arena farming. Fight most left opponent in the list. Good for minor accounts.
    steps:
      - if:
          condition: "compare_with_text_easyocr(260,553,56,23,'Arena') or compare_with_any_image(260,553,56,23,'Arena.png',0.85)" #  Check if Arena icon is available
          then:
            - click: [272,486] # Click on Arena icon
            - delay: 1
            ### General Arena ###
            - click: [153,359] 
            - delay: 3
            - click: [629,560] # Click Match button
            - delay: 1
            # Quick battle checkbox is to be checked
            # TO-DO Add a check if attack is free 
            # Attack #1
            - log: "General Arena attack #1"
            - click: [280,580] # Click the most left opponent in the list
            - delay: 2
            - click: [462,615] # Collect rewards
            - delay: 2
            - click: [462,615] # Second click if areana league is increased
            - log: "General Arena attack #2"
            - click: [280,580] # Click the most left opponent in the list
            - delay: 2
            - click: [462,615] # Collect rewards
            - delay: 2
            - click: [462,615] # Second click if areana league is increased
            - log: "General Arena attack #3"
            - click: [280,580] # Click the most left opponent in the list
            - delay: 2
            - click: [462,615] # Collect rewards
            - delay: 2
            - click: [462,615] # Second click if areana league is increased
            - click: [60, 50] # exit General arena screen
            - delay: 1
            - click: [60, 50] # exit main arena screen

            ### Cross server Arena ###
            - log: "Cross server Arena farming"
            - click: [474,377] 
            - delay: 3
            - click: [629,560] # Click Match button
            - delay: 1
            # Quick battle checkbox is to be checked
            # Attack #1
            - log: "Cross server Arena attack #1"
            - click: [280,580] # Click the most left opponent in the list
            - delay: 2
            - click: [462,615] # Collect rewards
            - delay: 2
            - click: [462,615] # Second click if areana league is increased
            - log: "Cross server Arena attack #2"
            - click: [280,580] # Click the most left opponent in the list
            - delay: 2
            - click: [462,615] # Collect rewards
            - delay: 2
            - click: [462,615] # Second click if areana league is increased
            - log: "Cross server Arena attack #3"
            - click: [280,580] # Click the most left opponent in the list
            - delay: 2
            - click: [462,615] # Collect rewards
            - delay: 2
            - click: [462,615] # Second click if areana league is increased
            - click: [60, 50] # exit General arena screen
            - delay: 1
            - click: [60, 50] # exit main arena screen
            ### Summit Arena Challenge ###
            # Placeholder for Summit Arena Challenge farming
            
            ### End farming ###
            - log: "Arena farming completed"
            - click: [60, 50] # exit main game screen
          else:
            - log: "Arena icon is not available"
            - send_email: "Arena farming failed for the {{ instance_name }} instance." # send an email if Arena icon is not available

  - name: Bonus_rewards
    description: Bonus rewards collection
    steps:
      - click: [70, 259] # Bonus icon
      - click: [90, 296] # Go to daily tasks

  - name: Supply_Depot
    description: Supply Depot farming
    steps:
      - if:
          condition: "compare_with_text_easyocr(142,301,111,26,'Supply')"
          then:
            - click: [194,263] # Enter to Supply Depot
            - if:
                condition: "compare_with_text_easyocr(882,637,215,37,'Free')" # If Free refresh button is available
                then:
                  - click: [968,656] # Click Free Refresh button
                  - if:
                      condition: "compare_with_any_image(427,207,105,105, ['purple.png', 'purple_chest.png'], 0.9)"  # Check item. Row 1 from 1. Column 1 from left 
                      then:
                        - click: [641,584] # Buy if resource is needed
                        - delay: 2
                        
                  
            
            - click: [60, 50] # return to the main  game sceen

